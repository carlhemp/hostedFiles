<!DOCTYPE html>
<html lang="en">
	<head>
    <script src="jquery-3.5.1.min.js"></script>
    <script src="turn.min.js"></script>
    <link rel="stylesheet" type="text/css" href="basic.css">

	  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>
	<body style="display:flex; height: 100vh; flex-direction: column;">
		<span style="flex: 25px 1 1;">
			<h1 style="font-family: cursive; margin: 1em auto 0 auto; width: max-content;">Merry Christmas!</h1>
			<h3 style="font-family: cursive; font-weight: lighter; margin: 0 auto 1em auto; width: max-content;">From the Hempels</h3>
		</span>
		<div id="flipbook-container" style="flex: 100px 3 1; display: flex; flex-direction: column;">
			<div id="flipbook">
				<div><img id="one" width="100%"></div>
				<div><img id="two" width="100%"></div>
				<div><img id="three" width="100%"></div>
				<div><img id="four" width="100%"></div>
			</div>
			<div style="display: flex;"><span onclick="$('#flipbook').turn('previous');" style="font-size: 2rem; cursor: pointer"> ◄ </span><span id="pageNum" style="margin: 0 auto 0 auto; font-size: 1.5rem; padding-top: .5rem;">1</span><span onclick="$('#flipbook').turn('next');" style="font-size: 2rem; cursor: pointer"> ► </span></div>
		</div>

		<span style="position:absolute; top: 0; right: 0; margin: 1em; font-size: 2rem; cursor: pointer;" onclick="loadImages();">↻</span>

		<script type="text/javascript">
			$("#flipbook").turn({
				autoCenter: false
			});
			$(window).resize(function() {
				let view_width = Math.min($(window).width() - 50, 1000);
				if(window.innerHeight > window.innerWidth){
			    $("#flipbook").turn("display", "single");
					$("#flipbook").turn("size", view_width, view_width*.6);
				}
				else {
			    $("#flipbook").turn("display", "double");
					$("#flipbook").turn("size", view_width, view_width*.3);
				}
			});
			$("#flipbook").bind("turned", function(event, page, view) {
			  $('#pageNum').text(page);
			});
			$(window).resize();
			let setNum = getRandomInt(5);

			function loadImages(){
				let newSetNum = getRandomInt(5);
				if(newSetNum == setNum){
					newSetNum = getRandomInt(5);
					if(newSetNum == setNum){
						newSetNum = getRandomInt(5);
					}
				}
				setNum = newSetNum;
	      console.log(setNum);
	      $('#one')[0].src = setNum + '-1.jpg';
	      $('#two')[0].src = setNum + '-2.jpg';
	      $('#three')[0].src = setNum + '-3.jpg';
	      $('#four')[0].src = setNum + '-4.jpg';
			}

			function getRandomInt(max) {
			  return Math.floor(Math.random() * Math.floor(max));
			}	
			loadImages();
      	
		</script>
	</body>
</html>